<div class="index-container">
  <div class="filter-container d-flex flex-column justify-content-center">
    <%= form_with url: bounties_path, method: :get, html: { 'data-controller' => "range-input", "data-range-input-min-value" => params[:min]||0 , "data-range-input-max-value" => params[:max] || 50000} do %>
      <h4 class="mb-4 text-center">Price range</h4>
      <div data-range-input-target="range">
        <%= number_field_tag :min, params[:min] || 0, 'data-range-input-target' => 'minInput', class: 'd-none' %>
        <%= number_field_tag :max, params[:max] || 50000, 'data-range-input-target' => 'maxInput', class: 'd-none' %>
      </div>
      <h4 class="mb-3 text-center">Difficulty level</h4>
      <div class="tag-item mb-3">
        <% (0..4).each do |i|%>
          <input type="checkbox" name="difficulty_level" id="difficulty_level_<%= i+1%>" value="<%= i+1%>" class="tag-selector" >
          <label for="difficulty_level_<%= i+1%>">level <%= i+1%></label>
        <% end %>
      </div>
      <%= submit_tag :ok, class: 'btn btn-primary d-flex align-items-center' %>
      <%= text_field_tag :query,
        params[:query],
        class: "d-none"
      %>
    <% end %>
  </div>
  <div class="bounty-container mb-3">
    <h2 class="title">All <span class="green">open</span> bounties</h2>
    <div class="input-group rounded mb-3">
      <%= form_with url: bounties_path, method: :get do %>
        <%= text_field_tag :query,
            params[:query],
            class: "",
            placeholder: "ðŸ”Ž Search..."
            %>
        <%#= submit_tag "".html_safe %>
        <%= button_tag do %>
          <i class='fa-solid fa-filter'></i>
        <% end %>


        <%= number_field_tag :min, params[:min] || 0, class: 'd-none' %>
        <%= number_field_tag :max, params[:max] || 50000, class: 'd-none' %>
      <% end %>
      <%# <%= link_to "Create a new bounty", new_bounty_path ,class: 'button-create' %>
    </div>
    <div class="bounties-card">
      <% @bounties.each do |bounty| %>
        <div class="bounty-card">
          <%= link_to bounty_path(bounty), class:"flex-grow-1 text-decoration-none" do %>
            <div class="bounty-info">
              <div class="bounty-title">
                <div class="title-title">
                  <p>Title: </p>
                </div>
                <div class="content-title">
                  <p><%= bounty.title %></p>
                </div>
              </div>
              <div class="bounty-deadline">
                <div class="title">
                  <p>Deadline: </p>
                </div>
                <div class="content">
                  <p><%= bounty.deadline %></p>
                </div>
              </div>
              <div class="bounty-price">
                <div class="title">
                  <p>Price: </p>
                </div>
                <div class="content">
                  <p><%= bounty.price_cents %></p>
                </div>
              </div>
              <div class="bounty-difficulty">
                <div class="title">
                  <p>Difficulty level: </p>
                </div>
                <div class="content">
                  <p><%= bounty.difficulty_level %></p>
                </div>
              </div>
            </div>
          <% end %>
          <div class="bounty-links">
            <% if bounty.user.photo.attached? %>
              <%= cl_image_tag bounty.user.photo.key, class:"avatar-bounty" %>
            <% else %>
              <%= image_tag("blank-profile.png")%>
            <% end %>
            <%= link_to bounty.github_repo do %>
              <i class="fa-brands fa-github"></i>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
